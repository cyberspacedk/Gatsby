(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{pi3A:function(e,t,n){"use strict";n.r(t),n.d(t,"query",(function(){return S}));var a=n("q1tI"),r=n.n(a),i=n("Wbzz"),l=n("wtQ5"),o=n("9eSz"),m=n.n(o),c=n("vOnD"),u=c.b.div.withConfig({displayName:"MenuItemStyles",componentId:"m2f55x-0"})(["display:grid;grid-template-columns:100px 1fr;grid-template-rows:1fr 1fr;gap:0 1.3rem;align-content:center;align-items:center;position:relative;.gatsby-image-wrapper{grid-row:span 2;height:100%;}p{margin:0;}button{font-size:1.5rem;}button + button{margin-left:1rem;}.remove{background:none;color:var(--red);font-size:3rem;position:absolute;top:0;right:0;box-shadow:none;line-height:1rem;}"]),s={S:.75,M:1,L:1.25},d=function(e,t){return e*s[t]},p=Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),f=function(e){return p.format(e/100)},g=function(e){var t=e.pizzas,n=e.addToOrder;return r.a.createElement(r.a.Fragment,null,t.map((function(e){return r.a.createElement(u,{key:e.id},r.a.createElement(m.a,{fluid:e.image.asset.fluid,alt:e.name}),r.a.createElement("div",null,r.a.createElement("h2",null,e.name)),r.a.createElement("div",null,["S","M","L"].map((function(t){return r.a.createElement("button",{type:"button",key:t,onClick:function(){return n({id:e.id,size:t})}},t," ",f(d(e.price,t)))}))))})))},b=function(e){var t=e.order,n=e.pizzas,a=e.removeFromOrder;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"You have ",t.length," item(s) in your order!"),t.map((function(e,t){var i=n.find((function(t){return t.id===e.id}));return r.a.createElement(u,{key:e.id+"-"+t},r.a.createElement(m.a,{fluid:i.image.asset.fluid}),r.a.createElement("h2",null,i.name),r.a.createElement("p",null,"Price:"," ",f(d(i.price,e.size))),r.a.createElement("button",{type:"button",className:"remove",title:"Remove pizza from order",onClick:function(){return a(t)}},"Ã—"))})))},v=n("o0o1"),E=n.n(v),h=(n("ls82"),n("HaE+")),O=n("KQm4"),y=n("f2wf"),z=function(e,t){var n=e.reduce((function(e,n){var a=t.find((function(e){return e.id===n.id}));return e+d(a.price,n.size)}),0);return f(n)},w=function(e,t){return e.map((function(e){var n=t.find((function(t){return t.id===e.id}));return Object.assign({},e,{name:n.name,thumbnail:n.image.asset.fluid.src,price:f(d(n.price,e.size))})}))},x=c.b.form.withConfig({displayName:"OrderStyles__OrderStyled",componentId:"sc-11qtif2-0"})(["display:grid;grid-template-columns:1fr 1fr;gap:20px;fieldset{grid-column:span 2;max-height:600px;overflow:auto;display:grid;gap:1rem;align-content:start;&.menu,&.order{grid-column:span 1;}}.email-x{display:none;}@media (max-width:900px){fieldset.menu,fieldset.order{grid-column:span 2;}}"]),S="1914719666";t.default=function(){var e=Object(i.c)(S).pizzas,t=function(e){var t=Object(a.useState)(e),n=t[0],r=t[1];return[n,function(e){var t,a=e.target.value;"number"===e.target.type&&(a=parseInt(a,10)),r(Object.assign({},n,((t={})[e.target.name]=a,t)))}]}({name:"",email:"",emailX:""}),n=t[0],o=t[1],m=function(e){var t=e.pizzas,n=e.values,r=Object(a.useContext)(y.b),i=r.order,l=r.setOrder,o=Object(a.useState)(!1),m=o[0],c=o[1],u=Object(a.useState)(!1),s=u[0],d=u[1],p=Object(a.useState)(""),f=p[0],g=p[1];return{order:i,addToOrder:function(e){l([].concat(Object(O.a)(i),[e]))},removeFromOrder:function(e){l([].concat(Object(O.a)(i.slice(0,e)),Object(O.a)(i.slice(e+1))))},error:m,loading:s,message:f,submitOrder:function(){var e=Object(h.a)(E.a.mark((function e(a){var r,l,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),d(!0),c(null),g(""),e.prev=4,r={order:w(i,t),total:z(i,t),name:n.name,email:n.email,emailX:n.emailX},"http://localhost:8888/.netlify/functions/placeOrder",e.next=9,fetch("http://localhost:8888/.netlify/functions/placeOrder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 9:return l=e.sent,e.t0=JSON,e.next=13,l.text();case 13:e.t1=e.sent,o=e.t0.parse.call(e.t0,e.t1),l.status>=400&&l.status<600?(d(!1),c(o.message)):(d(!1),g("Success! Come on down for your pizza!")),e.next=21;break;case 18:e.prev=18,e.t2=e.catch(4),c(e.t2.message);case 21:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}()}}({pizzas:e.nodes,values:n}),c=m.order,u=m.addToOrder,s=m.removeFromOrder,d=m.error,p=m.loading,f=m.message,v=m.submitOrder;return f?r.a.createElement("p",null,f):r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{title:"Order Pizza"}),r.a.createElement(x,{onSubmit:v},r.a.createElement("fieldset",{disabled:p},r.a.createElement("legend",null,"Your Info"),r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{type:"text",name:"name",id:"name",value:n.name,onChange:o}),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",name:"email",id:"email",value:n.email,onChange:o}),r.a.createElement("input",{type:"email",name:"emailX",className:"email-x",value:n.emailX,onChange:o})),r.a.createElement("fieldset",{className:"menu",disabled:p},r.a.createElement("legend",null,"Menu"),r.a.createElement(g,{pizzas:e.nodes,addToOrder:u})),r.a.createElement("fieldset",{className:"order",disabled:p},r.a.createElement("legend",null,"Order"),r.a.createElement(b,{order:c,removeFromOrder:s,pizzas:e.nodes})),r.a.createElement("fieldset",{disabled:p},r.a.createElement("h3",null,"Total is - ",z(c,e.nodes)),r.a.createElement("div",{style:{color:"red",textAlign:"center"}},d&&r.a.createElement("p",null,d)),r.a.createElement("button",{type:"submit",disabled:p},p?"Placing order ...":"Order Ahead!"))))}}}]);
//# sourceMappingURL=component---src-pages-order-js-077a7d8d9ff200d31e56.js.map